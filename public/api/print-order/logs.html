<!DOCTYPE html>
<html>
<head>
    <title>Logs Impression</title>
    <meta charset="utf-8">
    <style>
        body { font-family: monospace; margin: 20px; }
        .log { background: #f0f0f0; padding: 10px; margin: 5px 0; border-left: 3px solid #007cba; }
        .error { border-left-color: #dc3545; background: #f8d7da; }
        .success { border-left-color: #28a745; background: #d4edda; }
        .info { border-left-color: #17a2b8; background: #d1ecf1; }
    </style>
</head>
<body>
    <h1>🔍 Logs d'impression - Diagnostic</h1>
    
    <div class="log info">
        <strong>📅 Timestamp:</strong> <span id="timestamp"></span>
    </div>
    
    <div class="log info">
        <strong>🌐 URL de test:</strong> <a href="/api/print-order/debug.txt" target="_blank">/api/print-order/debug.txt</a>
    </div>
    
    <div class="log info">
        <strong>🖨️ URL pour imprimante:</strong> <code>https://preview--sushi-eats.lovable.app/api/print-order/debug.txt</code>
    </div>
    
    <div class="log">
        <strong>📋 Configuration imprimante requise:</strong><br>
        • Server Direct Print: Enable<br>
        • URL Server1: https://preview--sushi-eats.lovable.app/api/print-order/debug.txt<br>
        • Interval: 5 secondes<br>
        • URL Encode: Enable<br>
        • Server Authentication: Disable
    </div>
    
    <div class="log">
        <strong>🔧 Tests à effectuer:</strong><br>
        1. Vérifier que l'URL s'ouvre dans le navigateur<br>
        2. Configurer l'imprimante avec l'URL exacte<br>
        3. Attendre 5-10 secondes après configuration<br>
        4. Vérifier les logs de l'imprimante si disponibles
    </div>
    
    <div class="log error">
        <strong>⚠️ Problèmes possibles:</strong><br>
        • L'imprimante ne peut pas accéder à HTTPS<br>
        • Firewall bloque l'accès externe<br>
        • L'imprimante n'a pas internet<br>
        • Configuration incorrecte de l'URL
    </div>
    
    <div class="log success">
        <strong>✅ Si ça marche:</strong><br>
        L'imprimante devrait imprimer ce contenu automatiquement toutes les 5 secondes
    </div>
    
    <script>
        document.getElementById('timestamp').textContent = new Date().toLocaleString('fr-FR');
        
        // Test de l'URL
        fetch('/api/print-order/debug.txt')
            .then(response => {
                if (response.ok) {
                    console.log('✅ URL accessible');
                } else {
                    console.log('❌ URL non accessible:', response.status);
                }
            })
            .catch(error => {
                console.log('❌ Erreur:', error);
            });
    </script>
</body>
</html>
